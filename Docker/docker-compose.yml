version: '3'
services:
  phpipam-web:
    image: phpipam/phpipam-www:latest
    container_name: phpipam-web
    hostname: phpipam-web
    restart: unless-stopped
    environment:
      - TZ=American/Chicago
      - IPAM_DATABASE_HOST=phpipam-mariadb
      - IPAM_DATABASE_WEBHOST=%
    depends_on:
      - phpipam-mariadb
  phpipam-cron:
    image: phpipam/phpipam-cron:latest
    container_name: phpipam-cron
    hostname: phpipam-cron
    restart: unless-stopped
    environment:
      - TZ=American/Chicago
      - IPAM_DATABASE_HOST=phpipam-mariadb
      - SCAN_INTERVAL=1h
    depends_on:
      - phpipam-mariadb
  phpipam-mariadb:
    image: mariadb:latest
    container_name: phpipam-mariadb
    hostname: phpipam-mariadb
    restart: unless-stopped
    environment:
      - MYSQL_ROOT_PASSWORD=example
    volumes:
      - ../Data/mysql:/var/lib/mysql
  nginx:
    image: nginx:latest
    container_name: nginx
    hostname: nginx
    restart: unless-stopped
    ports:
      - "80:80"
      - "443:443"
    volumes:
      - ../Config/nginx.conf:/etc/nginx/nginx.conf
      - ../Data/nginx:/etc/ssl/private
